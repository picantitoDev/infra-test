# ================================================
# INVENTORY - INFRAESTRUCTURA MULTI-VLAN (CI/CD)
# Versión sin ForwardAgent, compatible con Jenkins
# ================================================

# -------------------------
# 1️⃣ Bastión principal
# -------------------------
[proxy]
192.168.0.222 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible

# -------------------------
# 2️⃣ VLAN10: zona de logs y monitoreo
# -------------------------
[nat_gateway]
10.10.0.100 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222"'

[grafana]
10.10.0.2 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222"'

[promtail]
10.10.0.3 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222"'

[router_10_20]
10.10.0.254 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222"'

# -------------------------
# 3️⃣ VLAN20: capa de aplicación
# -------------------------
[app]
10.20.0.1 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222\" root@10.10.0.254"'

[rabbitmq]
10.20.0.2 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222\" root@10.10.0.254"'

[router_20_30]
10.20.0.253 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222\" root@10.10.0.254"'

# -------------------------
# 4️⃣ VLAN30: capa de datos
# -------------------------
[database]
10.30.0.1 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\\\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222\\\" root@10.10.0.254\" root@10.20.0.253"'

[redis]
10.30.0.2 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\\\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222\\\" root@10.10.0.254\" root@10.20.0.253"'

[backups]
10.30.0.3 ansible_user=root ansible_ssh_private_key_file=/var/jenkins_home/.ssh/ansible \
ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible -o ProxyCommand=\\\"ssh -W %h:%p -i /var/jenkins_home/.ssh/ansible root@192.168.0.222\\\" root@10.10.0.254\" root@10.20.0.253"'

# -------------------------
# Variables globales
# -------------------------
[all:vars]
ansible_python_interpreter=/usr/bin/python3
