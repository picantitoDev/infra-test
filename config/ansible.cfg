# ================================================
# ansible.cfg - Configuración optimizada para Jenkins CI/CD
# ================================================

[defaults]
host_key_checking = False                # Evita prompts de confirmación de claves host
interpreter_python = auto                # Detecta automáticamente el intérprete Python remoto
timeout = 120                            # Máximo tiempo de espera para conexión SSH
inventory = ./inventory.ini              # Inventario local relativo al workspace
deprecation_warnings = False             # Oculta advertencias de funciones en desuso
retry_files_enabled = False              # Evita crear archivos *.retry
forks = 10                               # Ejecuta tareas en paralelo en varios hosts

[ssh_connection]
pipelining = True                        # Reduce overhead de SSH para mejorar velocidad
ssh_args = -A                            \
           -o ForwardAgent=yes           \
           -o StrictHostKeyChecking=no   \
           -o UserKnownHostsFile=/dev/null \
           -o ControlMaster=auto         \
           -o ControlPersist=10m         \
           -o ConnectTimeout=60

# Explicación:
# -A / ForwardAgent=yes → permite usar el agente SSH del Jenkins para saltos múltiples (ProxyJump)
# -StrictHostKeyChecking=no → ignora cambios de fingerprint en entornos reprovisionados
# -UserKnownHostsFile=/dev/null → no guarda huellas (ideal para hosts efímeros)
# -ControlMaster / ControlPersist → mantiene sockets abiertos para acelerar conexiones posteriores
# -ConnectTimeout=60 → tiempo máximo por intento de conexión
